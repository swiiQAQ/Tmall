<html>
    <head>
        <meta charset="utf-8">
        <title>Tmall</title>
        <link href="css/tmall.css" type="text/css" rel="stylesheet">
        <link href="css/scroll.css" type="text/css" rel="stylesheet">
    </head>
    <body>
        <div class="page">
        <div class="Tmall_index_header">
            <div class="header_left">
                <span>喵，欢迎来天猫</span>
                <span class="header_left_ac">请登录</span>
                <span class="header_left_ac">免费注册</span>
            </div>
            <div class="header_right">
                <ul>
                    <li>
                        <div class="MyTB">
                            <div class="MyTB_sel">
                                <span>我的淘宝</span>
                                <span class="triangle"></span>
                            </div>
                            <div class="baby">
                                <div class="buyed">已买到的宝贝</div>
                                <div class="selled">已卖出的宝贝</div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <i class="brand icon"></i>
                        <span>我关注的品牌</span>
                    </li>
                    <li>
                        <i class="cart icon"></i>
                        <div class="cart_num">
                            购物车
                            <span>0</span>
                            件
                        </div>
                    </li>
                    <li>
                        <div class="favorite">
                            <div class="MyTB_sel">
                                <span>收藏夹</span>
                                <span class="triangle"></span>
                            </div>
                        </div>
                    </li>
                    <li>|</li>
                    <li>
                        <i class="mobile icon"></i>
                        <span>手机版</span>
                    </li>
                    <li>
                        <span>淘宝网</span>
                    </li>
                    <li>
                        <span>企业购</span>
                    </li>
                    <li>
                        <div class="MyTB_sel">
                                <span>商家支持</span>
                                <span class="triangle"></span>
                        </div>
                    </li>
                    <li>
                        <span>网站导航</span>
                    </li>
                </ul>
            </div>
        </div>
        <div class="top_bar">
            <img class="bar_gif" src="img/tmall.gif">
            <div class="top_bar_right">
                <div class="search_item">
                    <input class="search_text" type="text">
                    <input class="search_button" type="button" value="搜索">
                    <div id="search_words"></div>
                </div>
                <script id="search_words_tpl" type="text/template">
                    <div>
                        <ul class="hotSearch">
                        <% _.each(data.model.list,function(item){ %>
                            <%  
                                if(item.highlight){var className="highLight"}
                            %>
                            <li class="<%=className%>">
                                <%=item.query%>
                            </li>
                        <% }) %>
                        </ul>
                    </div>
                </script>
            </div>
        </div>
        <div class="goodsNav">
            <div class="naver">
                <ul class="nav_ban">
                    <li>
                        <span>天猫超市</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>天猫国际</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>天猫会员</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>品牌街</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>电器城</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>喵鲜生</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>医药馆</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>营业厅</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>魅力惠</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>飞猪旅行</span>
                        <div class="tinyCat"></div>
                    </li>
                    <li>
                        <span>苏宁易购</span>
                        <div class="tinyCat"></div>
                    </li>
                </ul>
            </div>
        </div>
        <div id="scroll">
            <div id="scroll_bar"></div>
            <script id="scroll_bar_tpl" type="text/template">
                <div>
                <%
                    _.each(data["07055"]["data"],function(item,id){
                        if(id<3){
                %>
                <div class="scroll_img" style="background-color:<%=item.bgColor%>">
                    <img src="http://<%=item.imgUrl%>">
                </div>
                <%}})%>
                </div>
            </script>
        </div>
        </div>
        <script src="js/jquery-1.12.0.min.js"></script>
        <script src="js/lodash.js"></script>
        <script>
            getAx("https://suggest.taobao.com/sug?area=tmall-hq","#search_words");
            getAx("https://aldh5.tmall.com/recommend2.htm?&appId=201602265,201602267,07055,201602266,2016030118,09044,201605170,201612221,201606279,2016062710","#scroll_bar");
            
            function getAx(loadUrl,templateId){
                $.ajax({
                    url:loadUrl,
                    data:'jsonp',
                    dataType: 'jsonp',
                    jsonp:'callback',
                    success:function(result){
                        renderTemplate(templateId,result)
                    }
                })
            }
            
            function renderTemplate(templateId,data){
                let templateText=$(templateId+"_tpl").text();
                let template=_.template(templateText,{'variable':'data'});
                $(templateId).html(template(data));
            }
        </script>
    </body>
</html>